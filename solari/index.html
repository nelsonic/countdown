<!doctype html>
<html>
<head>
  <title>Solari</title>
</head>
<body>
	<div id="container"></div>
  <script src="lib/underscore.js"></script>
  <script src="lib/Three.js"></script>
  <script src="lib/stats.js"></script>
  <script src="lib/events.js"></script>
  <script src="src/SolariTexture.js"></script>
  <script src="src/SolariRow.js"></script>
  <script src="src/SolariFlap.js"></script>
  <script src="src/Solari.js"></script>
  <script>
  (function () {
  var board = window.Board = new Solari;
  new SolariTexture().bind('load', function () {
    var alphaSet = this,
        row;

    document.getElementById('container').appendChild(board.el);

    // Set up the board
    _(2).times(function () {
      row = new SolariRow(board.y);

      _(21).times(function () {
        row.add(alphaSet);
      });
      board.add(row);
    });

    Board.start();

    // Set a message
    setTimeout(function () {
      Board.setMessage([
        ' DAYS HOURS MINS SEC ',
        time()
      ])
    }, 1000);
  }).load('img/chars.png', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-.# '.split(''), 70, 63);


  function padzero(num) {
    return (num.toString().length === 1) ? '0' + num : '' + num;
  }

  var DEADLINE = new Date(2017, 7, 5, 16).getTime();
  console.log(DEADLINE);
  /*---------------------*
   | DAYS HOURS MINS SEC |
   *---------------------*
   |  83    12   41   12 |
   *---------------------*
   |123456789012345678901|
   *---------------------*/
  function time() {
    var NOW = new Date().getTime();
    var DIF = Math.floor((DEADLINE - NOW) / 1000);
    var DD  = padzero( Math.floor(DIF / (24 * 60 * 60)) );
    // var rem = DIF - ;
    var HH  = padzero( Math.floor( (DIF - parseInt(DD, 10) * (24 * 60 * 60)) / (60 * 60) ) );
    var MM  = padzero( Math.floor( (DIF - DD * 24 * 60 * 60 - HH * 60 * 60 ) / 60 ) );
    var SS  = padzero( Math.floor( (DIF - DD * 24 * 60 * 60 - HH * 60 * 60 - MM * 60) ) );
    var str = '  ' + DD + '    ' + HH + '   ' + MM + '   ' + SS;
    // console.log(str);
    return str;
  }
  time();
  setInterval(function(){
    Board.setMessage([
        ' DAYS HOURS MINS SEC ',
        time()
      ])
  }, 500);


  })();
  </script>
  <style>
  *{
    margin:0;
    padding:0;
    overflow:hidden;
  }
  body{
    background:white;
  }
  </style>
</body>
</html>
